{% extends 'base.html' %} {% block nav_item_title %}Історія полива{% endblock %} {% block custom_css %} {% endblock %} {% block modals %}{% endblock %}
{% block container %}
         <button type="button" class="btn btn-primary btn-refresh-history" data-value=1>24 години</button>
         <button type="button" class="btn btn-primary btn-refresh-history" data-value=7>Тиждень</button>
         <button type="button" class="btn btn-primary btn-refresh-history" data-value=31>Місяць</button>
         <table id="rules_table" class="table table-condensed table-striped table-sm">
         <thead>
          <tr>
            <th>Лінія</th>
            <th>Дія</th>
            <th>Час</th>
            <th>Статус</th>
            <th></th>
          </tr>
        </thead>
            <tbody>
               {% for n in my_list %}
               <tr>
               <td class="text-center">{{n['branch_name']}}</td>
               <td>{{n['rule_name']}}</td>
               <td>{{n['timer']}}</td>
                  {% if n['state'] == 2 %}
                     <td>{{n['rule_state']}}</td>
                     <td><button type="button" class="btn btn-secondary disabled" data-id={{n['id']}}">Полито</button></td>
                  {% elif n['state'] == 3 %}
                     <td>{{n['rule_state']}}</td>
                     <td><button type="button" class="btn btn-secondary disabled" data-id={{n['id']}}">{{n['rule_state']}}</button></td>
                  {% elif n['outdated'] == 1 %}
                     <td>Застаріло</td>
                     <td><button type="button" class="btn btn-secondary disabled" data-id={{n['id']}}">Застаріло</button></td>
                  {% elif n['active'] == 0 %}
                     <td>Неактивно</td>
                     <td><button type="button" class="btn btn-secondary" data-id={{n['id']}} onclick="activate_rule(this)">Активувати</button></td>
                  {% elif 'Відмінено' in n['rule_state'] %}          
                     <td>{{n['rule_state']}}</td>
                     <td><button type="button" class="btn btn-secondary disabled" data-id={{n['id']}}">Відмінено</button></td>
                  {% else %}
                     <td>{{n['rule_state']}}</td>
                     <td><button type="button" class="btn btn-secondary" data-id={{n['id']}} onclick="deactivate_rule(this)">Не виконувати</button></td>
                  {% endif %}
               </tr>
               {% endfor %}
            </tbody>
         </table>
      {% endblock %}
