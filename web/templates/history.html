{% extends 'base.html' %} {% block nav_item_title %}Історія полива{% endblock %} {% block custom_css %} {% endblock %} {% block modals %}{% endblock %} {% block container %}
<div id="card-holder">
    <div class="row">
        {% for n in my_list %}
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4 top" data-interval_id={{n[ 'interval_id']}}">
            <div class='card card-rule'>
                <div class='card-block'>
                    <div class='card-title'>
                        <h4 style='display: inline-block; float: left;' id='line_id' data-interval_id={{n[ 'interval_id']}}>{{n['line_name']}}</h4>
                        <div class='material-switch pull-right' style='display: inline-block; float: right;'>
                            <input id='input_{{n[ ' interval_id ']}}' class='active_true_false' type='checkbox' data-value={{n[ 'active']}} data-id='{{n[ ' interval_id ']}}' />
                            <label for='input_{{n[ ' interval_id ']}}' class='label-primary'></label>
                        </div>
                    </div>
                    <p class='card-text' style='display: inline-block;'>
                        <table>
                            <tbody class='collapse tbody' id='{{n[' interval_id ']}}'>
                                <tr>
                                    <th>Тривалість:</th>
                                    <td>
                                        <input type='number' pattern='\d*' class='form-control form-text-control disabled' id='irrigation_minutes' value={{n[ 'time']}} required>
                                    </td>
                                </tr>
                                <tr>
                                    <th>Повтори:</th>
                                    <td>
                                        <input type='number' pattern='\d*' class='form-control form-text-control disabled' id='irrigation_intervals' value={{n[ 'intervals']}} required>
                                    </td>
                                </tr>
                                <tr id='irrigation_time_wait_group'>
                                    <th>Час між поливами:</th>
                                    <td>
                                        <input type='number' pattern='\d*' class='form-control form-text-control disabled' id='irrigation_time_wait' value={{n[ 'time_wait']}} required>
                                    </td>
                                </tr>
                                <tr>
                                    <th>Повторюється:</th>
                                    <td>
                                        <select class='form-control form-text-control schedule_select disabled' id='schedule_select' data-value={{n[ 'repeat_value']}}>
                                            <option value=1 selected='selected' title='Кожен день'>Кожен день</option>
                                            <option value=2 title='Кожні 2 дня'>Кожні 2 дня</option>
                                            <option value=3 title='Кожні 3 дня'>Кожні 3 дня</option>
                                            <option value=4 title='Один раз'>Один раз</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr tabindex='0'>
                                    <th>Дата початку:</th>
                                    <td>
                                        <input class='form-control irrigation_date form-text-control disabled' type='date' id='start_date' data-value='{{n[' date_time_start ']}}'>
                                    </td>
                                </tr>
                                <tr tabindex='0'>
                                    <th>Час:</th>
                                    <td>
                                        <input type='time' class='form-control irrigation_time form-text-control disabled' data-value='{{n[' date_time_start ']}}'>
                                    </td>
                                </tr>
                                <tr>
                                    <th>Дата завершення:</th>
                                    <td>
                                        <input class='form-control irrigation_end_date form-text-control disabled' type='date' id='end_date' data-value='{{n[' end_date ']}}'>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br>
                        <span id='summary'></span>
                    </p>
                </div>
                <div class='card-footer'>
                    <button type='button' class='btn btn-danger ongoing-rule-remove edit-flow' data-id='{{n[' interval_id ']}}'>
                        Видалити
                    </button>
                    <button type='button' class='btn btn-secondary ongoing-rule-cancel edit-flow' data-id='{{n[' interval_id ']}}'>
                        Скасувати зміни
                    </button>
                    <button type='button' class='btn btn-primary ongoing-rule-save edit-flow' data-id='{{n[' interval_id ']}}'>
                        Зберегти правило
                    </button>
                    <button type='button' class='btn btn-secondary ongoing-rule-edit show-flow' data-id='{{n[' interval_id ']}}'>
                        Редагувати
                    </button>
                    <button type='button' class='btn btn-primary show-flow' data-toggle='collapse' data-target='#{{n[' interval_id ']}}' aria-expanded='false' aria-controls='{{n[' interval_id ']}}'>
                        <span class='if-collapsed'>Деталі</span>
                        <span class='if-not-collapsed'>Приховати деталі</span>
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
        <!-- <div class="switcher-wrapper">
    <ul class="list-group">
        <li class="list-group-item"><span>Показати всі правила</span>
            <div class="material-switch pull-right">
                <input id="all_rules" name="someSwitchOption001" type="checkbox" />
                <label for="all_rules" class="label-primary"></label>
            </div>
        </li>
    </ul>
</div>
<table id="rules_table" class="table table-condensed table-striped">
    <thead>
        <tr>
            <th>Лінія</th>
            <th>Дія</th>
            <th>Час</th>
            <th>Тривалість</th>
            <th>Статус</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for n in my_list %}
        <tr>
            <td class="text-center">{{n['branch_name']}}</td>
            <td>{{n['rule_name']}}</td>
            <td>{{n['timer']}}</td>
            <td>{{n['time']}}</td>
            {% if n['state'] == 2 %}
            <td>{{n['rule_state']}}</td>
            <td></td>
            {% elif n['state'] == 3 %}
            <td>{{n['rule_state']}}</td>
            <td></td>
            {% elif n['outdated'] == 1 %}
            <td>Застаріло</td>
            <td></td>
            {% elif 'Скасовано' in n['rule_state'] %}
            <td>{{n['rule_state']}}</td>
            <td></td>
            {% elif n['active'] == 0 %}
            <td>Неактивно</td>
            <td>
                <button type="button" class="btn btn-secondary" data-id={{n[ 'id']}} onclick="activate_rule(this)">Активувати</button>
            </td>
            {% else %}
            <td>{{n['rule_state']}}</td>
            <td>
                <button type="button" class="btn btn-secondary" data-id={{n[ 'id']}} onclick="cancel_rule(this)">Скасувати</button>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
 -->
    </div>
</div>{% endblock %} {% block custom_scripts %}
<script src="static/js/history_min.js"></script>{% endblock %}