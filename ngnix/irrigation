server {
        listen 7542;
        listen [::]:7542;
        server_name mozz.asuscomm.com;

        ssl on;
        ssl_certificate /var/www/app/ssl_sertificats/mozz/cert.pem;
        ssl_certificate_key /var/www/app/ssl_sertificats/mozz/privkey.pem;

		error_page 497  https://$host:$server_port$request_uri;

        location / {
        				add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
                        proxy_pass http://0.0.0.0:8000;
                        proxy_redirect off;
			            proxy_set_header Host $host:$server_port;
			            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			            proxy_set_header X-Forwarded-Ssl on;
                   }

        # Requests for socket.io are passed on to Node on port 3000
		 location ~* \.io {
		      proxy_set_header X-Real-IP $remote_addr;
		      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		      proxy_set_header Host $http_host;
		      proxy_set_header X-NginX-Proxy true;

		      proxy_pass http://0.0.0.0:8000;
		      proxy_redirect off;

		      proxy_http_version 1.1;
		      proxy_set_header Upgrade $http_upgrade;
		      proxy_set_header Connection "upgrade";
		    }
       }
